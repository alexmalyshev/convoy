<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Convoy: src/circbuf/circbuf.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Convoy</div>
   <div id="projectbrief">A collection of useful data structures.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">src/circbuf/circbuf.c File Reference</div>  </div>
</div>
<div class="contents">

<p>A circular buffer library.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="circbuf_8h_source.html">circbuf.h</a>&quot;</code><br/>
</div><table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcircbuf.html">circbuf</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circbuf_8c.html#a7a3687cd3b1160e8cfb1f63b98d72420">circbuf_init</a> (long len)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates and initializes a new circbuf.  <a href="#a7a3687cd3b1160e8cfb1f63b98d72420"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circbuf_8c.html#a13f01def2a80fbf0f55cdba11998ec8b">circbuf_destroy</a> (<a class="el" href="structcircbuf.html">circbuf</a> *cb)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees the array in cb and cb itself.  <a href="#a13f01def2a80fbf0f55cdba11998ec8b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circbuf_8c.html#af54bbeec21e6641cb3e583c57220480e">circbuf_dequeue</a> (<a class="el" href="structcircbuf.html">circbuf</a> *cb)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes the front element of cb if it exists and returns it.  <a href="#af54bbeec21e6641cb3e583c57220480e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circbuf_8c.html#a7cee597f48e3ea7ea63480dc33f32143">circbuf_enqueue</a> (<a class="el" href="structcircbuf.html">circbuf</a> *cb, void *elem)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Inserts elem as the new back of cb.  <a href="#a7cee597f48e3ea7ea63480dc33f32143"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circbuf_8c.html#ab12437c34beba7fedfceb74f1b0386d7">circbuf_peek</a> (<a class="el" href="structcircbuf.html">circbuf</a> *cb)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the front element of cb if it exists.  <a href="#ab12437c34beba7fedfceb74f1b0386d7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circbuf_8c.html#a9ccf5163db038c5a542051a6c8d8e941">circbuf_clear</a> (<a class="el" href="structcircbuf.html">circbuf</a> *cb)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes all elements from cb.  <a href="#a9ccf5163db038c5a542051a6c8d8e941"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>A circular buffer library. </p>
<p>Implemented as a dynamic array with two indices to track the front and back of the circular buffer. We malloc an array with an extra slot so as to simplify checking for empty and full circbufs. The circbuf is empty if its front index is equal to its back index, and it is full if its back index plus one (with wraparound courtesy of mod) is equal to its front index.</p>
<dl class="author"><dt><b>Author:</b></dt><dd>Alexander Malyshev </dd></dl>
<dl class="bug"><dt><b><a class="el" href="bug.html#_bug000004">Bug:</a></b></dt><dd>No known bugs. </dd></dl>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="a9ccf5163db038c5a542051a6c8d8e941"></a><!-- doxytag: member="circbuf.c::circbuf_clear" ref="a9ccf5163db038c5a542051a6c8d8e941" args="(circbuf *cb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int circbuf_clear </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcircbuf.html">circbuf</a> *&#160;</td>
          <td class="paramname"><em>cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Removes all elements from cb. </p>
<p>Will not free the elements in cb.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">cb</td><td>the address of the circbuf we want to clear out. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Success status. </dd></dl>

</div>
</div>
<a class="anchor" id="af54bbeec21e6641cb3e583c57220480e"></a><!-- doxytag: member="circbuf.c::circbuf_dequeue" ref="af54bbeec21e6641cb3e583c57220480e" args="(circbuf *cb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* circbuf_dequeue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcircbuf.html">circbuf</a> *&#160;</td>
          <td class="paramname"><em>cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Removes the front element of cb if it exists and returns it. </p>
<p>Will fail and return NULL if cb is NULL.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">cb</td><td>the address of the circbuf we want to remove the front from. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The front element of cb if it exists, NULL if cb is empty. </dd></dl>

</div>
</div>
<a class="anchor" id="a13f01def2a80fbf0f55cdba11998ec8b"></a><!-- doxytag: member="circbuf.c::circbuf_destroy" ref="a13f01def2a80fbf0f55cdba11998ec8b" args="(circbuf *cb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int circbuf_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcircbuf.html">circbuf</a> *&#160;</td>
          <td class="paramname"><em>cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Frees the array in cb and cb itself. </p>
<p>Will not free the elements stored in the nodes of cb.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">cb</td><td>the address of the circbuf we want to deallocate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Success status. </dd></dl>

</div>
</div>
<a class="anchor" id="a7cee597f48e3ea7ea63480dc33f32143"></a><!-- doxytag: member="circbuf.c::circbuf_enqueue" ref="a7cee597f48e3ea7ea63480dc33f32143" args="(circbuf *cb, void *elem)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int circbuf_enqueue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcircbuf.html">circbuf</a> *&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>elem</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Inserts elem as the new back of cb. </p>
<p>Will fail and return 1 if cb is NULL or elem is NULL, or if cb is full.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">cb</td><td>the address of the circbuf we want to insert elem into. </td></tr>
    <tr><td class="paramname">elem</td><td>the element we want to insert as the new back of cb. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Success status. </dd></dl>

</div>
</div>
<a class="anchor" id="a7a3687cd3b1160e8cfb1f63b98d72420"></a><!-- doxytag: member="circbuf.c::circbuf_init" ref="a7a3687cd3b1160e8cfb1f63b98d72420" args="(long len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcircbuf.html">circbuf</a>* circbuf_init </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Allocates and initializes a new circbuf. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>the desired size of the circbuf. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A pointer to a new circbuf of the given size. </dd></dl>

</div>
</div>
<a class="anchor" id="ab12437c34beba7fedfceb74f1b0386d7"></a><!-- doxytag: member="circbuf.c::circbuf_peek" ref="ab12437c34beba7fedfceb74f1b0386d7" args="(circbuf *cb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* circbuf_peek </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcircbuf.html">circbuf</a> *&#160;</td>
          <td class="paramname"><em>cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the front element of cb if it exists. </p>
<p>Will return NULL if cb is NULL.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">cb</td><td>the address of the circbuf we want to peek into. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The front element of cb if it exists, NULL if cb is empty. </dd></dl>

</div>
</div>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Thu Jun 30 2011 02:21:38 for Convoy by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
